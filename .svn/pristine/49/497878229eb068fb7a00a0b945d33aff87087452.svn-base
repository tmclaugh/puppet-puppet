# $Id$

class nscd {
	package { "nscd" :
		ensure => installed,
	}

	file { "/etc/nscd.conf" :
		owner => "root",
		group => "root",
		mode => 644,
		require => Package["nscd"],
	}

	service { "nscd_service" :
		enable => true,
		ensure => true,
		name => "nscd",
		require => File["/etc/nscd.conf"],
		subscribe => File["/etc/nscd.conf"],
	}


	# XXX: This does not appear to work correctly in CentOS5
	exec { "nscd_passwd_clear" :
		command => "nscd -i passwd",
		refreshonly => true,
	}

	exec { "nscd_group_clear" :
		command => "nscd -i group",
		refreshonly => true,
	}
}
