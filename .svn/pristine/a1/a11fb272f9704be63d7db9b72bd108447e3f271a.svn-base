# $Id$

class straycat::os::linux::nss {
	if $::operatingsystem == 'centos' {
		if $::operatingsystemrelease >= 6 { 
			class { "nslcd" :
				ldap_nss_uri => $straycat::params::ldap_nss_uri,
				ldap_base => $straycat::params::ldap_base,
				ldap_binddn => $straycat::params::ldap_binddn,
				ldap_bindpw => $straycat::params::ldap_bindpw,
				ldap_base_users => $straycat::params::ldap_base_users,
				ldap_base_groups => $straycat::params::ldap_base_groups,
			}
			include nscd
			Class["nslcd"] -> Class["nscd"]
		} else {
			class { "nss_ldap" :
				ldap_nss_uri => $straycat::params::ldap_nss_uri,
				ldap_base => $straycat::params::ldap_base,
				ldap_binddn => $straycat::params::ldap_binddn,
				ldap_bindpw => $straycat::params::ldap_bindpw,
				ldap_base_users => $straycat::params::ldap_base_users,
				ldap_base_groups => $straycat::params::ldap_base_groups,
			}
			include nscd
			Class["nss_ldap"] -> Class["nscd"]
		}
	} else {
		class { "nss_ldap" :
			ldap_nss_uri => $straycat::params::ldap_nss_uri,
			ldap_base => $straycat::params::ldap_base,
			ldap_binddn => $straycat::params::ldap_binddn,
			ldap_bindpw => $straycat::params::ldap_bindpw,
			ldap_base_users => $straycat::params::ldap_base_users,
			ldap_base_groups => $straycat::params::ldap_base_groups,
		}
		include nscd
		Class["nss_ldap"] -> Class["nscd"]
	}
}

